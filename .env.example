#############################################
# ForumKit 環境設定範本（根目錄 .env.example）
# 使用方式：複製為 .env 並依需求填值；註解統一繁體中文，變數名稱使用英文字母。
#############################################

# ───────────────────────────────────────────
# 應用模式與版本
# ───────────────────────────────────────────
TZ=Asia/Taipei                   # 全平台時區統一為 UTC+8（台灣時間）
APP_MODE=normal                  # 運行模式：normal | development | maintenance | test
APP_BUILD_VERSION=v1.1.0         # 應用版本標記（僅顯示用）
FLASK_ENV=production             # Flask 內部環境指示（資訊用途）
FLASK_DEBUG=0                    # 0=關閉除錯；1=開啟（僅開發建議）
JWT_SECRET_KEY=                  # JWT 簽章金鑰（請改為強隨機值）
SECRET_KEY=                      # Flask 用金鑰（少數功能/備援）
PASSWORD_SALT_ROUNDS=12          # 密碼雜湊成本

# ───────────────────────────────────────────
# 對外埠口（Docker Compose）
# ───────────────────────────────────────────
HOST_PORT=12005                  # 主站/Nginx 對外埠
CDN_PORT=12002                   # CDN 對外埠（服務 uploads/public）
POSTGRES_PORT=12007              # PostgreSQL 對外埠（容器內固定 80）
REDIS_PORT=12008                 # Redis 對外埠（容器內固定 80）

# ───────────────────────────────────────────
# 資料庫與快取
# ───────────────────────────────────────────
# DATABASE_URL 僅在「非 Compose」部署時需要；Compose 已於服務環境內固定為 postgres:80
DATABASE_URL=postgresql+psycopg2://forumkit:forumkit_password@postgres:5432/forumkit
REDIS_URL=redis://redis:6379/0     # 容器內 Redis 服務使用 6379 埠

# ───────────────────────────────────────────
# 上傳與 CDN
# ───────────────────────────────────────────
UPLOAD_ROOT=/data/uploads        # 後端容器內掛載之上傳根目錄
# 供後端健康檢查之內部連線（Compose 服務名稱與容器埠）
CDN_HOST=cdn
# CDN_PORT 於後端容器內固定為 80（已由 compose 設定），此處無須覆寫

# ───────────────────────────────────────────
# 對外 URL 組裝（Webhook 連結/縮圖/Logo 使用）
# ───────────────────────────────────────────
# 開發預設：依 docker-compose 對外埠（如有改埠請改用你的 HOST_PORT/CDN_PORT）
PUBLIC_BASE_URL=http://localhost:12005
PUBLIC_CDN_URL=http://localhost:12002

# Webhook 背景掃描頻率（秒），用於使用者自綁 Webhook 推送
USER_WEBHOOK_FEED_INTERVAL=60

# ───────────────────────────────────────────
# CORS 與 Socket 來源白名單
# ───────────────────────────────────────────
ALLOWED_ORIGINS=http://localhost:12005,http://127.0.0.1:12005,http://localhost:5173,http://127.0.0.1:5173
SOCKETIO_ORIGINS=http://localhost:12005,http://127.0.0.1:12005,http://localhost:5173,http://127.0.0.1:5173

# ───────────────────────────────────────────
# 安全限制與標頭
# ───────────────────────────────────────────
MAX_CONTENT_MB=16                # 全域請求體大小上限（MB）
UPLOAD_MAX_SIZE_MB=10            # 單檔上傳大小上限（MB）
SECURITY_HEADERS_DISABLED=0      # 設 1 可停用安全標頭（不建議）
ENABLE_HSTS=0                    # 僅在 HTTPS 與正式域名下建議設為 1
# CONTENT_SECURITY_POLICY=       # 需要自訂 CSP 時才填，否則使用後端預設嚴格策略

# ───────────────────────────────────────────
# OAuth（Google 校園登入）
# ───────────────────────────────────────────
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
OAUTH_REDIRECT_URL=http://localhost:12005/api/auth/google/callback

# ───────────────────────────────────────────
# 後台通知 Webhook（Discord 相容）
# ───────────────────────────────────────────
ADMIN_NOTIFY_WEBHOOK=
# 舊版後援（未設定 ADMIN_NOTIFY_WEBHOOK 時使用）
DISCORD_REPORT_WEBHOOK=
DISCORD_THEME_WEBHOOK=

# ───────────────────────────────────────────
# 單一開發者帳號（僅開發/測試）
# ───────────────────────────────────────────
ENFORCE_SINGLE_ADMIN=0           # 1=強制僅保留下方帳號；0=關閉
SINGLE_ADMIN_USERNAME=
SINGLE_ADMIN_PASSWORD=

# ───────────────────────────────────────────
# 前端設定（Vite）
# ───────────────────────────────────────────
VITE_API_BASE_URL=http://localhost:${HOST_PORT}
# 手機端臨時頁（1=開啟；0=關閉）
VITE_MOBILE_UNDER_CONSTRUCTION=0

# ───────────────────────────────────────────
# 整合：Discord 機器人（選用，從根 .env 讀取）
# ───────────────────────────────────────────
DISCORD_BOT_TOKEN=
ALLOWED_GUILD_IDS=
ADMIN_ROLE_NAME=admin
FORUMKIT_API_URL=http://localhost:${HOST_PORT}/api
FORUMKIT_ADMIN_TOKEN=